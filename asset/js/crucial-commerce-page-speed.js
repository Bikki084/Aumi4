/*! instant.page v3.0.0 - (C) 2019 Alexandre Dieulot - https://instant.page/license */let mouseoverTimer,lastTouchTimestamp;const prefetches=new Set,prefetchElement=document.createElement("link"),isSupported=prefetchElement.relList&&prefetchElement.relList.supports&&prefetchElement.relList.supports("prefetch")&&window.IntersectionObserver&&"isIntersecting"in IntersectionObserverEntry.prototype,allowQueryString="instantAllowQueryString"in document.body.dataset,allowExternalLinks="instantAllowExternalLinks"in document.body.dataset,useWhitelist="instantWhitelist"in document.body.dataset;let delayOnHover=65,useMousedown=!1,useMousedownOnly=!1,useViewport=!1;if("instantIntensity"in document.body.dataset){const e=document.body.dataset.instantIntensity;if(e.substr(0,"mousedown".length)=="mousedown")useMousedown=!0,e=="mousedown-only"&&(useMousedownOnly=!0);else if(e.substr(0,"viewport".length)=="viewport")navigator.connection&&(navigator.connection.saveData||navigator.connection.effectiveType.includes("2g"))||(e=="viewport"?document.documentElement.clientWidth*document.documentElement.clientHeight<45e4&&(useViewport=!0):e=="viewport-all"&&(useViewport=!0));else{const t=parseInt(e);isNaN(t)||(delayOnHover=t)}}if(isSupported){const e={capture:!0,passive:!0};if(useMousedownOnly||document.addEventListener("touchstart",touchstartListener,e),useMousedown?document.addEventListener("mousedown",mousedownListener,e):document.addEventListener("mouseover",mouseoverListener,e),useViewport){let t;window.requestIdleCallback?t=n=>{requestIdleCallback(n,{timeout:1500})}:t=n=>{n()},t(()=>{const n=new IntersectionObserver(o=>{o.forEach(r=>{if(r.isIntersecting){const s=r.target;n.unobserve(s),preload(s.href)}})});document.querySelectorAll("a").forEach(o=>{isPreloadable(o)&&n.observe(o)})})}}function touchstartListener(e){lastTouchTimestamp=performance.now();const t=e.target.closest("a");!isPreloadable(t)||preload(t.href)}function mouseoverListener(e){if(performance.now()-lastTouchTimestamp<1100)return;const t=e.target.closest("a");!isPreloadable(t)||(t.addEventListener("mouseout",mouseoutListener,{passive:!0}),mouseoverTimer=setTimeout(()=>{preload(t.href),mouseoverTimer=void 0},delayOnHover))}function mousedownListener(e){const t=e.target.closest("a");!isPreloadable(t)||preload(t.href)}function mouseoutListener(e){e.relatedTarget&&e.target.closest("a")==e.relatedTarget.closest("a")||mouseoverTimer&&(clearTimeout(mouseoverTimer),mouseoverTimer=void 0)}function isPreloadable(e){if(!(!e||!e.href)&&!(useWhitelist&&!("instant"in e.dataset))&&!(!allowExternalLinks&&e.origin!=location.origin&&!("instant"in e.dataset))&&!!["http:","https:"].includes(e.protocol)&&!(e.protocol=="http:"&&location.protocol=="https:")&&!(!allowQueryString&&e.search&&!("instant"in e.dataset))&&!(e.hash&&e.pathname+e.search==location.pathname+location.search)&&!("noInstant"in e.dataset))return!0}function preload(e){if(prefetches.has(e))return;const t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t),prefetches.add(e)}
//# sourceMappingURL=/s/files/1/0520/1669/t/48/assets/crucial-commerce-page-speed.js.map
